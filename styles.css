:root { --night:#000000; --day:#ffffff; }

*{ box-sizing:border-box; }
html,body { height:100%; margin:0; }
body {
  background: var(--night);
  color: #eef2ff;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  overflow:hidden;
  transition: background 500ms ease, color 400ms ease;
}
body.day { background: var(--day); color:#0a0a0a; }

/* Sunrise (night -> day) */
body.sunrise {
  animation: dawnSky 2.2s ease-in forwards;
}
@keyframes dawnSky {
  0%   { background: radial-gradient(120% 100% at 50% 120%, #0b0b16 0%, #0b0b16 25%, #0b0b16 60%, #000 100%); }
  50%  { background: radial-gradient(130% 100% at 50% 110%, #ff7a1a 0%, #d94c00 22%, #172656 60%, #05060a 100%); }
  100% { background: radial-gradient(140% 120% at 50% 80%, #ffd59e 0%, #ffe6bd 35%, #fff7e3 70%, #ffffff 100%); }
}

/* Sunset (day -> night) */
body.sunset {
  animation: duskSky 1.5s ease-out forwards;
}
@keyframes duskSky {
  0%   { background: radial-gradient(140% 120% at 50% 80%, #ffd59e 0%, #ffe6bd 35%, #fff7e3 70%, #ffffff 100%); }
  60%  { background: radial-gradient(130% 110% at 50% 90%, #ff9f40 0%, #ff6a00 20%, #1a2a6c 60%, #07090f 100%); }
  100% { background: #000; }
}

/* Fullscreen "canvas" surface (no borders) */
#canvas {
  position: fixed; inset: 0;
  outline: none;
  cursor: none;
}

/* Subtle flash on any key */
.flash { animation: flash .25s ease; }
@keyframes flash {
  from { box-shadow: inset 0 0 0 0 rgba(255,255,255,0); }
  50%  { box-shadow: inset 0 0 160px 0 rgba(255,255,255,.10); }
  to   { box-shadow: inset 0 0 0 0 rgba(255,255,255,0); }
}

/* ===== Particles ===== */

/* Stars (~2x) */
.star {
  position: fixed; width: 24px; height: 24px; pointer-events:none;
  transform: translate(-50%,-50%) scale(.85);
  background:
    radial-gradient(circle, #fff 0 38%, transparent 39% 100%),
    conic-gradient(transparent 0 10%, #fff 10% 13%, transparent 13% 35%,
                   #fff 35% 38%, transparent 38% 60%,
                   #fff 60% 63%, transparent 63% 85%,
                   #fff 85% 88%, transparent 88% 100%);
  filter: drop-shadow(0 0 14px rgba(255,255,255,.95));
  animation: star-pop .9s ease-out forwards;
}
@keyframes star-pop {
  0%   { opacity:0; transform: translate(-50%,-50%) scale(.25) rotate(-15deg); }
  25%  { opacity:1; transform: translate(calc(-50% + var(--x)), calc(-50% + var(--y))) scale(1.2) rotate(0); }
  100% { opacity:0; transform: translate(calc(-50% + var(--x2)), calc(-50% + var(--y2))) scale(.15) rotate(20deg); }
}

/* Moon (~1.5x) */
.moon {
  position: fixed; width: 54px; height: 54px; border-radius:50%; pointer-events:none;
  transform: translate(-50%,-50%) scale(.6);
  background:
    radial-gradient(120% 120% at 30% 30%, #fff, #dcdfe6 60%, #adb4c2 100%),
    radial-gradient(8px 8px at 40% 40%, #c3c9d6, transparent 70%),
    radial-gradient(10px 10px at 65% 55%, #c3c9d6, transparent 70%),
    radial-gradient(7px 7px at 55% 70%, #c3c9d6, transparent 70%);
  box-shadow: 0 0 26px rgba(230,240,255,.65);
  animation: moon-drift 1.25s ease-out forwards;
}
@keyframes moon-drift {
  0%   { opacity:0; transform: translate(-50%,-50%) scale(.5); filter: brightness(0.9); }
  25%  { opacity:1; transform: translate(-50%,-50%) scale(1.1); }
  100% { opacity:0; transform: translate(calc(-50% + var(--mx)), calc(-50% + var(--my))) scale(.7); filter: brightness(1.1); }
}

/* Galaxy (~1.8x) */
.galaxy {
  position: fixed; width: 28px; height: 28px; border-radius:50%; pointer-events:none;
  transform: translate(-50%,-50%) scale(.9);
  background:
    conic-gradient(from 0deg, rgba(255,255,255,.9), rgba(190,220,255,.2), rgba(140,170,255,.15), rgba(255,255,255,.9));
  filter: blur(.5px) drop-shadow(0 0 12px rgba(160,200,255,.95));
  animation: swirl 1.6s linear infinite, fadeRing 1.6s ease-out forwards;
}
@keyframes swirl { to { transform: translate(calc(-50% + var(--gx)), calc(-50% + var(--gy))) scale(5.5) rotate(360deg); } }
@keyframes fadeRing { to { opacity: 0; } }
.speck {
  position: fixed; width: 8px; height: 8px; border-radius:50%;
  background: #cfe6ff; box-shadow: 0 0 8px rgba(180,220,255,.95);
  pointer-events:none;
  transform: translate(0,0) scale(1);
  animation: suck 1.05s ease-in forwards;
}
@keyframes suck {
  0%   { opacity:1; transform: translate(var(--tx), var(--ty)) scale(1); }
  80%  { opacity:.9; }
  100% { opacity:0; transform: translate(0px, 0px) scale(0.2); }
}

/* Meteor (~2x) with longer trail */
.meteor {
  position: fixed; width: 3px; height: 3px; border-radius: 50%; pointer-events:none;
  background: #fff;
  box-shadow:
    0 0 14px rgba(255,255,255,.95),
    0 0 30px rgba(120,180,255,.8);
  transform: translate(-50%,-50%);
  animation: streak 1.2s cubic-bezier(.2,.65,.2,1) forwards;
}
.meteor:after {
  content:""; position:absolute; right: 100%; top: 50%;
  width: 200px; height: 3px;
  transform: translateY(-50%);
  background: linear-gradient(90deg, rgba(180,220,255,.0), rgba(200,230,255,.4), rgba(255,255,255,.9));
  filter: blur(0.7px);
}
@keyframes streak {
  0%   { opacity: 0; transform: translate(calc(-50% + var(--sx)), calc(-50% + var(--sy))) rotate(var(--rot)); }
  10%  { opacity: 1; }
  100% { opacity: 0; transform: translate(calc(-50% + var(--ex)), calc(-50% + var(--ey))) rotate(var(--rot)); }
}

/* Splash ring */
.splash {
  position: fixed; width: 10px; height: 10px; border-radius:50%;
  border: 2px solid rgba(255,255,255,.95);
  transform: translate(-50%,-50%) scale(.25);
  opacity: .95; pointer-events: none;
  animation: ripple .55s ease-out forwards;
  filter: drop-shadow(0 0 12px rgba(255,255,255,.9));
}
@keyframes ripple { to { transform: translate(-50%,-50%) scale(7); opacity: 0; } }

/* Sun element */
.sun {
  z-index: 10;
  position: fixed; width: 200px; height: 200px; border-radius:50%; pointer-events:none;
  left: 50vw; top: 110vh; transform: translate(-50%,-50%) scale(.7);
  background: radial-gradient(circle at 50% 50%, #fff59e 0 35%, #ffd95a 36% 60%, #ffb300 61% 100%);
  box-shadow: 0 0 40px 14px rgba(255,215,64,.7), 0 0 160px 40px rgba(255,200,40,.4);
}
.sun.rise { animation: sunrise 2.2s ease-out forwards; }
@keyframes sunrise {
  0%   { opacity:0; top: 110vh; transform: translate(-50%,-50%) scale(.5); filter:brightness(1.1); }
  40%  { opacity:1; }
  100% { opacity:1; top: 45vh; transform: translate(-50%,-50%) scale(1); }
}
.sun.set { animation: sunsetDown 1.5s ease-in forwards; }
@keyframes sunsetDown {
  0%   { top: 45vh; transform: translate(-50%,-50%) scale(1); opacity: 1; }
  100% { top: 110vh; transform: translate(-50%,-50%) scale(0.8); opacity: 0; }
}